<div class="container mt-5">
  <h2 class="text-center text-primary mb-5">Offer Details</h2>

  <!-- Offer details display -->
  <div *ngIf="offer" class="offer-item card shadow-lg border-0 rounded-lg mb-5">
    <div class="card-body">
      <h3 class="offer-title text-dark">{{ offer.title }}</h3>
      <p class="offer-description"><strong>Description:</strong> {{ offer.description }}</p>
      <p class="offer-category"><strong>Category:</strong> {{ offer.category }}</p>
      <p class="offer-date"><strong>Publication Date:</strong> {{ offer.datePub ? (offer.datePub | date: 'short') : 'N/A' }}</p>
      <p class="offer-expiry"><strong>Expiration Date:</strong> {{ offer.dateExp ? (offer.dateExp | date: 'short') : 'N/A' }}</p>
    </div>

    <!-- Offer actions (Edit/Delete) -->
    <div class="card-footer bg-light text-center">
      <button class="btn btn-warning me-3" [routerLink]="['/front-office/edit-offer', offer.id]">
        <i class="fas fa-edit"></i> Edit
      </button>
      <button class="btn btn-danger" (click)="deleteOffer(offer.id)">
        <i class="fas fa-trash-alt"></i> Delete
      </button>
    </div>
  </div>

  <!-- Error Message for Bad Words -->
  <div *ngIf="errorMessage" class="alert alert-danger mt-3">
    <strong>Error: </strong>{{ errorMessage }}
  </div>

  <!-- Comments Section -->
  <div *ngIf="comments.length > 0" class="comments-section">
    <h3 class="text-secondary mb-3">Comments:</h3>
    <ul class="list-unstyled">
      <li *ngFor="let comment of comments" class="comment-item card mb-4 p-4 shadow-sm">
        <p>{{ comment.content }}</p>
        <small class="text-muted">Created on: {{ comment.creationDate | date: 'short' }}</small>
      </li>
    </ul>
  </div>

  <!-- Add Comment Section -->
  <div class="add-comment-section mt-4">
    <h3 class="text-secondary mb-3">Add a Comment:</h3>
    <div class="d-flex">
      <input type="text" [(ngModel)]="newComment" class="form-control form-control-sm me-2" placeholder="Write your comment..." />
      <button class="btn btn-primary btn-sm" (click)="addComment(offer.id)">
        <i class="fas fa-paper-plane"></i> Post
      </button>
    </div>
  </div>

  <!-- Applications Section -->
  <div *ngIf="applications.length > 0" class="applications-section mt-4">
    <h3 class="text-secondary mb-3">Applications:</h3>
    <ul class="list-unstyled">
      <li *ngFor="let application of applications" class="application-item card mb-4 p-4 shadow-sm">
        <p><strong>Status:</strong> {{ application.status }}</p>
        <p><strong>CV:</strong> {{ application.cv }}</p>
        <p><strong>Motivation Letter:</strong> {{ application.motivationLetter}}</p>
        <small class="text-muted">Posted on: {{ application.postDate | date: 'short' }}</small>

        <!-- Accept and Deny Buttons -->
        <div class="mt-3">
          <button class="btn btn-success me-2" (click)="acceptApplication(application.id)">
            <i class="fas fa-check-circle"></i> Accept
          </button>
          <button class="btn btn-danger" (click)="denyApplication(application.id)">
            <i class="fas fa-times-circle"></i> Deny
          </button>
        </div>
      </li>
    </ul>
  </div>

  <!-- Back to Offer List Button -->
  <div class="text-center mt-4">
    <button class="btn btn-outline-secondary px-5 py-3" [routerLink]="['/front-office/internships-offers']">
      <i class="fas fa-arrow-left"></i> Back to Offer List
    </button>
  </div>
</div>
